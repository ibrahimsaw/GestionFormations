<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau de Bord Étudiant</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container-fluid py-4">
        <!-- En-tête Étudiant -->
        <div class="card shadow-sm mb-4">
            <div class="card-body bg-primary text-white">
                <div class="row align-items-center">
                    <div class="col-lg-6 col-md-12 mb-3 mb-lg-0">
                        <div class="d-flex align-items-center">
                            <div class="bg-white bg-opacity-25 rounded-circle p-3 me-3">
                                <i class="fas fa-user-graduate fa-2x text-white"></i>
                            </div>
                            <div>
                                <h2 class="mb-1" id="student-name">Chargement...</h2>
                                <p class="mb-0 opacity-75">
                                    <i class="fas fa-graduation-cap me-2"></i>
                                    <span id="student-program">Chargement...</span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12 text-lg-end">
                        <p class="mb-1">
                            <i class="fas fa-calendar-alt me-2"></i>
                            <strong>Année Académique:</strong> <span id="academic-year">2024-2025</span>
                        </p>
                        <p class="mb-0">
                            <i class="fas fa-id-card me-2"></i>
                            <strong>Numéro Étudiant:</strong> <span id="student-id">Chargement...</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="card shadow-sm mb-4">
            <div class="card-body p-2">
                <ul class="nav nav-pills nav-fill" id="main-nav">
                    <li class="nav-item">
                        <a class="nav-link active" data-bs-toggle="pill" href="#profile">
                            <i class="fas fa-user me-2"></i>Profil
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#grades">
                            <i class="fas fa-chart-line me-2"></i>Notes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#schedule">
                            <i class="fas fa-calendar me-2"></i>Calendrier
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#courses">
                            <i class="fas fa-book me-2"></i>Cours
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-bs-toggle="pill" href="#documents">
                            <i class="fas fa-file-alt me-2"></i>Documents
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Contenu des onglets -->
        <div class="tab-content">
            <!-- Profil -->
            <div class="tab-pane fade show active" id="profile">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-user-circle me-2"></i>
                            Informations Personnelles
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row" id="profile-cards">
                            <!-- Les cartes seront générées par JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes -->
            <div class="tab-pane fade" id="grades">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-chart-bar me-2"></i>
                            Notes et Résultats
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-success" id="overall-grade">
                            <!-- Moyenne générale sera générée par JavaScript -->
                        </div>
                        <div class="table-responsive">
                            <table class="table table-hover table-striped">
                                <thead class="table-dark">
                                    <tr>
                                        <th><i class="fas fa-book me-2"></i>Matière</th>
                                        <th><i class="fas fa-user-tie me-2"></i>Professeur</th>
                                        <th><i class="fas fa-weight me-2"></i>Coeff</th>
                                        <th><i class="fas fa-star me-2"></i>Note</th>
                                        <th class="d-none d-md-table-cell"><i class="fas fa-users me-2"></i>Moy. Classe</th>
                                        <th><i class="fas fa-check-circle me-2"></i>Statut</th>
                                    </tr>
                                </thead>
                                <tbody id="grades-table">
                                    <!-- Les notes seront générées par JavaScript -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Calendrier -->
            <div class="tab-pane fade" id="schedule">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-calendar-alt me-2"></i>
                            Calendrier Académique
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row mb-4">
                            <div class="col-md-4 mb-3">
                                <div class="card border-info">
                                    <div class="card-header bg-info text-white text-center">
                                        <h5 class="mb-0" id="current-month">Janvier 2025</h5>
                                    </div>
                                    <div class="card-body" id="calendar-mini">
                                        <!-- Mini calendrier sera généré par JavaScript -->
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="card border-success">
                                    <div class="card-header bg-success text-white">
                                        <h5 class="mb-0">Événements à venir</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="list-group list-group-flush" id="upcoming-events">
                                            <!-- Les événements seront générés par JavaScript -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cours -->
            <div class="tab-pane fade" id="courses">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-books me-2"></i>
                            Mes Cours
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row" id="courses-container">
                            <!-- Les cours seront générés par JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Documents -->
            <div class="tab-pane fade" id="documents">
                <div class="card shadow-sm">
                    <div class="card-header bg-primary text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-folder-open me-2"></i>
                            Documents
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row" id="documents-container">
                            <!-- Les documents seront générés par JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Données de l'étudiant
        const studentData = {
            profile: {
                name: "Jean Dupont",
                program: "Étudiant en Informatique - Niveau L3",
                studentId: "202400123",
                academicYear: "2024-2025",
                identity: {
                    lastName: "Dupont",
                    firstName: "Jean",
                    birthDate: "15/03/2002",
                    birthPlace: "Paris, France"
                },
                contact: {
                    phone: "+33 6 12 34 56 78",
                    email: "jean.dupont@email.com",
                    address: "123 Rue de la Paix, 75001 Paris"
                },
                academic: {
                    field: "Informatique",
                    level: "Licence 3",
                    enrollmentYear: "2022",
                    status: "Actif"
                },
                emergency: {
                    name: "Marie Dupont",
                    relation: "Mère",
                    phone: "+33 6 98 76 54 32"
                }
            },
            grades: {
                overall: { grade: 14.2, mention: "Mention Bien" },
                subjects: [
                    { name: "Programmation Web", professor: "Prof. Martin", coeff: 3, grade: 16, classAvg: 13.2, status: "Validé" },
                    { name: "Base de Données", professor: "Prof. Dubois", coeff: 4, grade: 15, classAvg: 12.8, status: "Validé" },
                    { name: "Algorithmes", professor: "Prof. Leroy", coeff: 4, grade: 12, classAvg: 11.5, status: "Validé" },
                    { name: "Réseaux", professor: "Prof. Bernard", coeff: 3, grade: 14, classAvg: 12.1, status: "Validé" },
                    { name: "Anglais", professor: "Prof. Smith", coeff: 2, grade: 9, classAvg: 10.5, status: "Rattrapage" },
                    { name: "Mathématiques", professor: "Prof. Moreau", coeff: 3, grade: 17, classAvg: 14.2, status: "Validé" }
                ]
            },
            events: [
                { name: "Examen Base de Données", date: "18 Janvier 2025, 14:00", type: "Examen" },
                { name: "Projet Programmation Web", date: "20 Janvier 2025, 23:59", type: "Projet" },
                { name: "Conférence IA", date: "25 Janvier 2025, 10:00", type: "Conférence" },
                { name: "Vacances d'hiver", date: "1-15 Février 2025", type: "Vacances" }
            ],
            courses: [
                { name: "Programmation Web", professor: "Prof. Martin", credits: 6, schedule: "Lundi 14h-17h", progress: 75, color: "primary" },
                { name: "Base de Données", professor: "Prof. Dubois", credits: 8, schedule: "Mercredi 9h-12h", progress: 60, color: "success" },
                { name: "Algorithmes", professor: "Prof. Leroy", credits: 8, schedule: "Vendredi 8h-11h", progress: 45, color: "warning" }
            ],
            documents: {
                academic: [
                    { name: "Relevé de notes S1", icon: "fas fa-file-pdf text-danger", type: "pdf" },
                    { name: "Certificat de scolarité", icon: "fas fa-file-pdf text-danger", type: "pdf" },
                    { name: "Emploi du temps", icon: "fas fa-file-word text-primary", type: "word" }
                ],
                resources: [
                    { name: "Cours BDD - Chapitre 1", icon: "fas fa-file-powerpoint text-warning", type: "ppt" },
                    { name: "TP Programmation Web", icon: "fas fa-file-archive text-info", type: "archive" },
                    { name: "Guide Algorithmes", icon: "fas fa-file-pdf text-danger", type: "pdf" }
                ]
            }
        };

        // Fonction pour initialiser les données de l'en-tête
        function initHeader() {
            document.getElementById('student-name').textContent = studentData.profile.name;
            document.getElementById('student-program').textContent = studentData.profile.program;
            document.getElementById('student-id').textContent = studentData.profile.studentId;
            document.getElementById('academic-year').textContent = studentData.profile.academicYear;
        }

        // Fonction pour générer les cartes du profil
        function generateProfileCards() {
            const profileCards = document.getElementById('profile-cards');
            const cardConfigs = [
                { title: "Identité", icon: "fas fa-id-card", color: "info", data: studentData.profile.identity },
                { title: "Contact", icon: "fas fa-phone", color: "success", data: studentData.profile.contact },
                { title: "Scolarité", icon: "fas fa-graduation-cap", color: "warning", data: studentData.profile.academic },
                { title: "Contact d'urgence", icon: "fas fa-exclamation-triangle", color: "danger", data: studentData.profile.emergency }
            ];

            cardConfigs.forEach(config => {
                const card = document.createElement('div');
                card.className = 'col-xl-6 col-lg-12 mb-3';
                
                let cardContent = `
                    <div class="card h-100">
                        <div class="card-header bg-${config.color} ${config.color === 'warning' ? 'text-dark' : 'text-white'}">
                            <h5 class="mb-0"><i class="${config.icon} me-2"></i>${config.title}</h5>
                        </div>
                        <div class="card-body">
                `;

                Object.entries(config.data).forEach(([key, value]) => {
                    const label = getFieldLabel(key);
                    const displayValue = key === 'status' ? `<span class="badge bg-success">${value}</span>` : value;
                    cardContent += `
                        <div class="row mb-2">
                            <div class="col-6"><strong>${label}:</strong></div>
                            <div class="col-6">${displayValue}</div>
                        </div>
                    `;
                });

                cardContent += `
                        </div>
                    </div>
                `;
                
                card.innerHTML = cardContent;
                profileCards.appendChild(card);
            });
        }

        // Fonction pour obtenir les libellés des champs
        function getFieldLabel(key) {
            const labels = {
                lastName: "Nom", firstName: "Prénom", birthDate: "Date de naissance", birthPlace: "Lieu de naissance",
                phone: "Téléphone", email: "Email", address: "Adresse",
                field: "Filière", level: "Niveau", enrollmentYear: "Année d'inscription", status: "Statut",
                name: "Nom", relation: "Lien"
            };
            return labels[key] || key;
        }

        // Fonction pour générer le tableau des notes
        function generateGradesTable() {
            const overallGrade = document.getElementById('overall-grade');
            const gradesTable = document.getElementById('grades-table');
            
            // Moyenne générale
            const { grade, mention } = studentData.grades.overall;
            const percentage = (grade / 20) * 100;
            overallGrade.innerHTML = `
                <h5><i class="fas fa-trophy me-2"></i>Moyenne générale: <strong>${grade}/20</strong> - ${mention}</h5>
                <div class="progress mt-3">
                    <div class="progress-bar bg-success" role="progressbar" style="width: ${percentage}%;"
                         aria-valuenow="${percentage}" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            `;

            // Tableau des matières
            studentData.grades.subjects.forEach(subject => {
                const row = document.createElement('tr');
                const gradeClass = subject.grade >= 15 ? 'text-success' : subject.grade >= 12 ? 'text-warning' : 'text-danger';
                const statusClass = subject.status === 'Validé' ? 'bg-success' : 'bg-danger';
                
                row.innerHTML = `
                    <td>${subject.name}</td>
                    <td>${subject.professor}</td>
                    <td><span class="badge bg-primary">${subject.coeff}</span></td>
                    <td><span class="${gradeClass} fw-bold">${subject.grade}/20</span></td>
                    <td class="d-none d-md-table-cell">${subject.classAvg}/20</td>
                    <td><span class="badge ${statusClass}">${subject.status}</span></td>
                `;
                gradesTable.appendChild(row);
            });
        }

        // Fonction pour générer le calendrier
        function generateCalendar() {
            const upcomingEvents = document.getElementById('upcoming-events');
            
            studentData.events.forEach(event => {
                const eventItem = document.createElement('div');
                eventItem.className = 'list-group-item d-flex justify-content-between align-items-start';
                
                const badgeColors = {
                    'Examen': 'bg-danger',
                    'Projet': 'bg-warning',
                    'Conférence': 'bg-info',
                    'Vacances': 'bg-success'
                };
                
                eventItem.innerHTML = `
                    <div class="ms-2 me-auto">
                        <div class="fw-bold">${event.name}</div>
                        <small class="text-muted">${event.date}</small>
                    </div>
                    <span class="badge ${badgeColors[event.type]} rounded-pill">${event.type}</span>
                `;
                upcomingEvents.appendChild(eventItem);
            });
        }

        // Fonction pour générer les cours
        function generateCourses() {
            const coursesContainer = document.getElementById('courses-container');
            
            studentData.courses.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'col-lg-4 col-md-6 mb-4';
                
                courseCard.innerHTML = `
                    <div class="card border-${course.color} h-100">
                        <div class="card-header bg-${course.color} ${course.color === 'warning' ? 'text-dark' : 'text-white'}">
                            <h5 class="mb-0">${course.name}</h5>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                <strong>Professeur:</strong> ${course.professor}<br>
                                <strong>Crédit:</strong> ${course.credits} ECTS<br>
                                <strong>Horaire:</strong> ${course.schedule}
                            </p>
                            <div class="mb-3">
                                <small class="text-muted">Progression:</small>
                                <div class="progress">
                                    <div class="progress-bar bg-${course.color}" style="width: ${course.progress}%"></div>
                                </div>
                                <small class="text-muted">${course.progress}% complété</small>
                            </div>
                        </div>
                        <div class="card-footer">
                            <button class="btn btn-sm btn-${course.color}">Voir détails</button>
                            <button class="btn btn-sm btn-outline-${course.color}">Ressources</button>
                        </div>
                    </div>
                `;
                coursesContainer.appendChild(courseCard);
            });
        }

        // Fonction pour générer les documents
        function generateDocuments() {
            const documentsContainer = document.getElementById('documents-container');
            
            const docSections = [
                { title: "Documents Académiques", color: "info", docs: studentData.documents.academic },
                { title: "Ressources Pédagogiques", color: "success", docs: studentData.documents.resources }
            ];

            docSections.forEach(section => {
                const sectionCard = document.createElement('div');
                sectionCard.className = 'col-md-6 mb-4';
                
                let docList = '';
                section.docs.forEach(doc => {
                    docList += `
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <i class="${doc.icon} me-2"></i>
                                ${doc.name}
                            </div>
                            <button class="btn btn-sm btn-outline-${section.color}">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    `;
                });
                
                sectionCard.innerHTML = `
                    <div class="card border-${section.color}">
                        <div class="card-header bg-${section.color} text-white">
                            <h5 class="mb-0">${section.title}</h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group list-group-flush">
                                ${docList}
                            </div>
                        </div>
                    </div>
                `;
                documentsContainer.appendChild(sectionCard);
            });
        }

        // Initialisation au chargement de la page
        document.addEventListener('DOMContentLoaded', function() {
            initHeader();
            generateProfileCards();
            generateGradesTable();
            generateCalendar();
            generateCourses();
            generateDocuments();
        });
    </script>
</body>
</html>