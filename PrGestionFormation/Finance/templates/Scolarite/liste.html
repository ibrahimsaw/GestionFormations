{% extends 'base.html' %}
{% load static %}
{% load form_tags %}

{% block content %}
 <div class="d-sm-flex align-items-center justify-content-between">
	 <h6 class="text-muted">{{ titre_page }} </h6>
	 <nav aria-label="breadcrumb" class="d-none d-sm-block">
		  <ol class="breadcrumb">
			{% for item in breadcrumb %}
			  {% if item.is_last %}
				<li class="breadcrumb-item active" aria-current="page">{{ item.name }}</li>
			  {% elif item.is_first %}
				<li class="breadcrumb-item">{{ item.name }} </li>
			  {% else %}
				<li class="breadcrumb-item"><a href="{{ item.url }}">{{ item.name }}</a></li>
			  {% endif %}
			{% endfor %}
		  </ol>
	  </nav>
	</div>
<div class="nav-align-top mb-4">
        <ul class="nav nav-pills mb-3 nav-fill" role="tablist">
          <li class="nav-item">
            <a class="nav-link {% if model_type == 'frais' %}active{% endif %}"
               href="{% url 'finance:scolarite-list' 'frais' %}">
              <i class="tf-icons bx bx-money"></i> Frais
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if model_type == 'paiement' %}active{% endif %}"
               href="{% url 'finance:scolarite-list' 'paiement' %}">
              <i class="tf-icons bx bx-credit-card"></i> Paiements
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if model_type == 'inscription' %}active{% endif %}"
               href="{% url 'finance:scolarite-list' 'inscription' %}">
              <i class="tf-icons bx bx-user-plus"></i> Inscriptions
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link {% if model_type == 'reinscription' %}active{% endif %}"
               href="{% url 'finance:scolarite-list' 'reinscription' %}">
              <i class="tf-icons bx bx-repeat"></i> Réinscriptions
            </a>
          </li>
        </ul>

        <div class="tab-content">
		 <div class="text-center">
			   <div class="alert bg-primary">
				 <h5 class="mb-0 text-white">Formulaire de {{ titre_page }}</h5>
			   </div>
			 </div>
          <div class="tab-pane fade show active">
            {% if object_list %}
              <div class="table-responsive scrollbar">
				<table id="tableau" class="table table-bordered table-striped fs-10 mb-0">
				  <thead class="bg-200">
                    <tr>
                      <th>#</th>
                      {% if model_type == 'frais' %}
                        <th class="text-900 sort">Libellé</th>
                        <th class="text-900 sort">Montant</th>
                        <th class="text-900 sort">Classe</th>
                      {% elif model_type == 'paiement' %}
                        <th class="text-900 sort">Étudiant</th>
                        <th class="text-900 sort">Montant</th>
                        <th class="text-900 sort">Date</th>
                      {% elif model_type == 'inscription' or model_type == 'reinscription' %}
                        <th class="text-900 sort">Étudiant</th>
                        <th class="text-900 sort">Classe</th>
                        <th class="text-900 sort">Date</th>
                      {% endif %}
                      <th class="text-900 sort">Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for obj in object_list %}
                    <tr>
                      <td>{{ forloop.counter }}</td>
                      {% if model_type == 'frais' %}
                        <td>{{ obj.libelle }} - {{ obj.classe }}</td>
                        <td>{{ obj.montant|floatformat:2 }} FCFA</td>
                        <td>{{ obj.classe.nom }}</td>
                      {% elif model_type == 'paiement' %}
                        <td>{{ obj.etudiant }}</td>
                        <td>{{ obj.montant|floatformat:2 }} FCFA</td>
                        <td>{{ obj.date|date:"d/m/Y" }}</td>
                      {% elif model_type == 'inscription' or model_type == 'reinscription' %}
                        <td>{{ obj.etudiant }}</td>
                        <td>{{ obj.classe.nom }}</td>
                        <td>{{ obj.date_inscription|date:"d/m/Y" }}</td>
                      {% endif %}
					 <td class="text-end">
					  <div class="d-flex justify-content-end">
						<!-- Détails -->
						<a href="{% url 'finance:scolarite-detail' type=model_type pk=obj.pk %}"
						   class="btn btn-link p-0 me-2" title="Détails">
						  <i class="bx bx-show text-info fs-4"></i>
						</a>
					
						<!-- Modifier -->
						<a href="{% url 'finance:scolarite-update' type=model_type pk=obj.pk %}"
						   class="btn btn-link p-0 me-2" title="Modifier">
						  <i class="bx bx-edit text-warning fs-4"></i>
						</a>
					
						<!-- Supprimer -->
						<a href="{% url 'finance:scolarite-delete' type=model_type pk=obj.pk %}"
						   class="btn btn-link p-0" title="Supprimer"
						   onclick="return confirm('Voulez-vous vraiment supprimer cet élément ?');">
						  <i class="bx bx-trash text-danger fs-4"></i>
						</a>
					  </div>
					</td>

                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            {% else %}
              <div class="alert alert-info">
                Aucun élément à afficher.
              </div>
            {% endif %}
          </div>
        </div>
      </div>


    <!-- Boutons flottants en bas à droite -->
  <div class="fixed-action-buttons">
	  <a href="{% url 'finance:scolarite-create' 'type=model_type' %}" class="btn btn-add">
		  <span class="tf-icons bx bx-notepad"></span>&nbsp; Ajouter
	  </a>
  </div>
{% endblock %}